(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9465:(e,t,a)=>{Promise.resolve().then(a.bind(a,61170))},47790:()=>{},61170:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(95155),r=a(42711),o=a(91332),n=a(70346),l=a(58438),c=a(13558),i=a(50627);let d=[{to:"0x7B39075D8A3422cdE4661F616D7956Aee0D54310",abi:[{type:"function",name:"increment",inputs:[],outputs:[],stateMutability:"nonpayable"}],functionName:"increment",args:[]}];var p=a(12115);function m(){let{address:e,isConnected:t}=(0,l.F)(),[a,m]=(0,p.useState)(""),[u,x]=(0,p.useState)(""),[b,h]=(0,p.useState)(""),[g,f]=(0,p.useState)(!1),[y,j]=(0,p.useState)(!1),{data:N}=(0,c.A)({address:e}),{writeContract:k,isPending:A,data:v}=(0,i.x)(),C=async()=>{if(e)try{k({address:"0x7B39075D8A3422cdE4661F616D7956Aee0D54310",abi:[{type:"function",name:"increment",inputs:[],outputs:[],stateMutability:"nonpayable"}],functionName:"increment"})}catch(e){console.error("Transaction failed:",e)}},P=async()=>{if(!e)return void x("Please connect your wallet first");f(!0),x("Reading...");try{console.log("Reading contract state..."),console.log("Contract address:","0x7B39075D8A3422cdE4661F616D7956Aee0D54310"),console.log("User address:",e);let t=await fetch("https://sepolia.base.org",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_call",params:[{to:"0x7B39075D8A3422cdE4661F616D7956Aee0D54310",data:"0x8381f58a"},"latest"],id:1})}),a=await t.json();if(console.log("RPC response:",a),a.result){let e=parseInt(a.result,16);console.log("Contract number value:",e),x(e.toString())}else console.log("No data returned from contract read"),x("No data returned")}catch(e){console.error("Failed to read contract:",e),x("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{f(!1)}},I=async()=>{if(!e)return void h("Please connect your wallet first");j(!0),h("Reading via Coinbase API...");try{let t;console.log("Reading contract state via Coinbase API..."),console.log("Contract address:","0x7B39075D8A3422cdE4661F616D7956Aee0D54310"),console.log("User address:",e);let a="72vTOaX1mkXmZhaRiLEeuNLidLZtzYuK";if(!a)return void h("Error: OnchainKit API key not found. Please add NEXT_PUBLIC_ONCHAINKIT_API_KEY to your .env.local file");console.log("Using API key:",a.substring(0,10)+"...");let s=null;for(let e of["https://api.developer.coinbase.com/rpc/v1/base-sepolia/ce5dba14-05b5-4a1c-99b0-14d75c6fc8cf","https://api.developer.coinbase.com/rpc/v1/base-sepolia","https://api.developer.coinbase.com/rpc/v1/base-sepolia/"])try{if(console.log("Trying endpoint:",e),t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({jsonrpc:"2.0",method:"eth_call",params:[{to:"0x7B39075D8A3422cdE4661F616D7956Aee0D54310",data:"0x8381f58a"},"latest"],id:1})}),console.log("Endpoint ".concat(e," response status:"),t.status),t.ok){s=e;break}console.log("Endpoint ".concat(e," failed with status:"),t.status)}catch(t){console.log("Endpoint ".concat(e," failed with error:"),t)}if(!s||!t)return void h("Error: All Coinbase API endpoints failed. Please check your API key and try again.");if(console.log("Working endpoint found:",s),console.log("Coinbase API response status:",t.status),console.log("Coinbase API response headers:",Object.fromEntries(t.headers.entries())),!t.ok){let e=await t.text();console.error("Coinbase API error:",e),404===t.status?h("Error: 404 - Coinbase API endpoint not found. This might be due to incorrect API key or endpoint URL."):h("Coinbase API Error: ".concat(t.status," - ").concat(e));return}let r=await t.json();if(console.log("Coinbase API response:",r),r.result){let e=parseInt(r.result,16);console.log("Contract number value (Coinbase):",e),h(e.toString())}else r.error?(console.error("Coinbase API returned error:",r.error),h("API Error: ".concat(r.error.message||"Unknown error"))):(console.log("No data returned from Coinbase API"),h("No data returned from Coinbase API"))}catch(e){console.error("Failed to read contract via Coinbase API:",e),h("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{j(!1)}};return(0,p.useEffect)(()=>{v&&m(v)},[v]),(0,s.jsxs)("div",{className:"flex flex-col min-h-screen font-sans dark:bg-background dark:text-white bg-white text-black",children:[(0,s.jsx)("header",{className:"pt-4 pr-4",children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("div",{className:"wallet-container",children:(0,s.jsxs)(r.uW,{children:[(0,s.jsxs)(r.Up,{children:[(0,s.jsx)(o.eu,{className:"h-6 w-6"}),(0,s.jsx)(o.SX,{})]}),(0,s.jsxs)(r.Z0,{children:[(0,s.jsxs)(o.lz,{className:"px-4 pt-3 pb-2",hasCopyAddressOnClick:!0,children:[(0,s.jsx)(o.eu,{}),(0,s.jsx)(o.SX,{}),(0,s.jsx)(o.pV,{}),(0,s.jsx)(o.AH,{})]}),(0,s.jsx)(r.vR,{icon:"wallet",href:"https://keys.coinbase.com",target:"_blank",rel:"noopener noreferrer",children:"Wallet"}),(0,s.jsx)(r.$e,{})]})]})})})}),(0,s.jsx)("main",{className:"flex flex-grow items-center justify-center",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl p-4",children:[(0,s.jsx)("div",{className:"mx-auto mb-6 w-1/3",children:(0,s.jsx)(n.ZX,{calls:d})}),t&&e&&(0,s.jsxs)("div",{className:"text-center mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connected Wallet Address:"}),(0,s.jsx)("p",{className:"font-mono text-sm break-all",children:e}),N&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Balance:"}),(0,s.jsxs)("p",{className:"font-mono text-sm",children:[N.formatted," ",N.symbol]})]}),u&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Counter Value:"}),(0,s.jsx)("p",{className:"font-mono text-sm",children:u})]}),(0,s.jsx)("button",{onClick:P,disabled:g,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 mr-2",children:g?"Reading...":"Read Contract State"}),(0,s.jsx)("button",{onClick:I,disabled:y,className:"mt-4 px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:y?"Reading...":"Read via Coinbase API"}),u&&(0,s.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Direct RPC Result:"}),(0,s.jsx)("p",{className:"font-mono text-sm break-all",children:u})]}),b&&(0,s.jsxs)("div",{className:"mt-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded border border-purple-200 dark:border-purple-800",children:[(0,s.jsx)("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Coinbase API Result:"}),(0,s.jsx)("p",{className:"font-mono text-sm break-all",children:b})]}),(0,s.jsx)("button",{onClick:C,disabled:A,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:A?"Processing...":"Increment Counter"}),a&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Transaction:"}),(0,s.jsx)("p",{className:"font-mono text-xs break-all",children:a})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[956,690,390,227,53,441,684,358],()=>t(9465)),_N_E=e.O()}]);